(this.webpackJsonptest_exercise_todo=this.webpackJsonptest_exercise_todo||[]).push([[0],{21:function(e,t,a){e.exports=a(31)},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(7),o=a.n(s),c=a(8),i=a(3),l=a(19),u=a(1),p=a(5),d=a(2),m=a(4),g="TASK_CREATE",f="TASK_DELETE",y="TASK_UPDATE",h="TASK_CHANGE_TYPE",k={createTask:function(e){return{type:g,payload:e}},updateTask:function(e){return{type:y,payload:e}},removeTask:function(e){return{type:f,payload:e}},changeTaskCategory:function(e,t){return{type:h,payload:{task:e,category:t}}}},v=a(11),O=a(10),b=a(12),j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).emitChange=function(){var e=o.a.findDOMNode(Object(b.a)(a)).innerHTML;a.props.onBlur&&e!==a.lastHtml&&a.props.onBlur({target:{index:a.props.index,name:a.props.name,value:e}}),a.lastHtml=e},a}return Object(m.a)(t,e),Object(O.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.html!==o.a.findDOMNode(this).innerHTML}},{key:"render",value:function(){return n.a.createElement("div",{index:this.props.index,name:this.props.name,className:this.props.className,"data-text":this.props.placeholder,onBlur:this.emitChange,contentEditable:!0,dangerouslySetInnerHTML:{__html:this.props.html}})}}]),t}(r.Component),T=function(e){var t=e.onMouseOver,a=e.onMouseOut,r=e.categories,s=e.handleChangeCategory,o=e.style;return n.a.createElement("span",{className:"task-move",onMouseOver:t,onMouseOut:a},n.a.createElement("span",null,"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c v"),n.a.createElement("ul",{className:"task-move-drop",style:o},r.map((function(e,t){return n.a.createElement("li",{key:t,value:e.id,onClick:s},e.title)}))))},E=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={style:{display:"none"}},a.changeTaskCategoryHandler=function(e){var t=a.props;(0,t.changeTaskCategory)(t.task,e.target.value.toString())},a.onMouseOverHandler=function(e){a.setState({style:{display:"block"}})},a.onMouseOutHandler=function(e){a.setState({style:{display:"none"}})},a}return Object(m.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.categories.items.filter((function(t){return t.id!==e.props.task.category}));return n.a.createElement(T,{categories:t,style:this.state.style,onMouseOver:this.onMouseOverHandler,onMouseOut:this.onMouseOutHandler,handleChangeCategory:this.changeTaskCategoryHandler})}}]),t}(r.Component),w=Object(i.b)((function(e){return{categories:e.categories}}),{changeTaskCategory:k.changeTaskCategory})(E),C=function(e){e.handleChange;var t=e.handleBlur,a=e.removeTask,r=e.tasks;e.children;return n.a.createElement("div",{className:"board"},r.items.map((function(e){return n.a.createElement("task",{key:e.id},n.a.createElement(j,{index:e.id,name:"title",className:"task-name",html:e.title,onBlur:t,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"}),n.a.createElement(j,{index:e.id,name:"desc",className:"task-description",html:e.desc,onBlur:t,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"}),n.a.createElement("div",{className:"task-options"},n.a.createElement("span",{className:"task-delete",onClick:function(){return a(e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),n.a.createElement(w,{task:e})))})))};function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).removeTaskHandler=function(e){return a.props.removeTask(e)},a.updateTaskHandler=function(e){var t=a.props;(0,t.updateTask)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t.tasks.items.filter((function(t){return t.id===e.target.index}))[0],Object(v.a)({},e.target.name,e.target.value)))},a}return Object(m.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return this.props.tasks.items.length?n.a.createElement(C,{tasks:this.props.tasks,removeTask:this.removeTaskHandler,handleBlur:this.updateTaskHandler}):n.a.createElement("span",{style:{opacity:".1"}},"\u041f\u0443\u0441\u0442\u043e")}}]),t}(r.Component),N=Object(i.b)(null,{removeTask:k.removeTask,updateTask:k.updateTask})(H),S=function(e){var t=e.createTask,a=e.sortTask,r=e.category,s=e.sorting,o=e.children;return n.a.createElement("div",{className:"column "+r.slug},n.a.createElement("div",{className:"name"},n.a.createElement("span",{className:"name-common"},r.title),n.a.createElement("span",{className:"name-sort",onClick:a},"sort ",1!==s?"(A-\u044f)":"(\u042f-\u0430)")),n.a.createElement("div",{className:"add-task"},n.a.createElement("span",{className:"add-task-text",onClick:t},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")),n.a.createElement("div",{className:"board"},o))},M=function(e,t){return e.sort((function(e,a){var r=e.title.toLowerCase(),n=a.title.toLowerCase();return r<n?t:r>n?-1*t:0})),e},D=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={sorting:0,tasks:{items:[]},prevProps:{}},a.componentDidMount=function(){var e=a.props.tasks.items.filter((function(e){return e.category===a.props.category.id}));a.setState({tasks:{items:e}})},a.createTaskHandler=function(){var e=a.props,t=e.category;(0,e.createTask)(t.id)},a.sortTaskHandler=function(){var e=a.state,t=e.sorting,r=e.tasks,n=0===t?-1:-1===t?1:-1,s=M(r.items,n);a.setState({sorting:n,tasks:{items:s}})},a.render=function(){return n.a.createElement(S,{category:a.props.category,sorting:a.state.sorting,sortTask:a.sortTaskHandler,createTask:a.createTaskHandler},n.a.createElement(N,{tasks:a.state.tasks}))},a}return Object(m.a)(t,e),t}(r.Component);D.getDerivedStateFromProps=function(e,t){if(t.prevProps.tasks!==e.tasks){var a=e.tasks.items.filter((function(t){return t.category===e.category.id}));return{tasks:{items:0===t.sorting?a:M(a,t.sorting)},prevProps:e}}return{prevProps:e}};var A=Object(i.b)((function(e){return{tasks:e.tasks,categories:e.categories}}),{createTask:k.createTask,removeTask:k.removeTask,updateTask:k.updateTask})(D),x=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).render=function(){return n.a.createElement("div",{className:"wrapper"},a.props.categories.items.map((function(e,t){return n.a.createElement(A,{key:t,category:e})})))},a}return Object(m.a)(t,e),t}(n.a.Component),_=Object(i.b)((function(e){return{categories:e.categories}}),null)(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(20);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(v.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={items:[{id:"0",title:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u0441\u044e \u0440\u0430\u0431\u043e\u0442\u0443",desc:"\u041d\u0443\u0436\u043d\u043e \u043f\u043e\u0439\u0442\u0438 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u043d\u0430\u0447\u0430\u0442\u043e\u0435",category:"1"}]},J={items:[{id:"0",title:"To do",slug:"to-do"},{id:"1",title:"In process",slug:"in-process"},{id:"2",title:"Done",slug:"done"}]},U=Object(c.c)({categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return t.type,e},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:var a=e.items.length.toString();return K({},e,{items:[].concat(Object(B.a)(e.items),[{id:a,title:"",desc:"",category:t.payload}])});case y:return K({},e,{items:e.items.map((function(e){return e.id===t.payload.id?t.payload:e}))});case f:return K({},e,{items:e.items.filter((function(e,a){return e.id!==t.payload}))});case h:return K({},e,{items:e.items.map((function(e){return e.id===t.payload.task.id?K({},e,{category:t.payload.category.toString()}):e}))});default:return e}}}),W=(a(30),Object(l.createLogger)()),F=Object(c.d)(U,Object(c.a)(W));o.a.render(n.a.createElement(i.a,{store:F},n.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.21c1a98d.chunk.js.map